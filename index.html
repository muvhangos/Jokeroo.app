<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Jokeroo</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { margin:0; padding:0; font-family:Arial,sans-serif; display:flex; justify-content:center; align-items:center; height:100vh; background:linear-gradient(135deg,#667eea,#764ba2); overflow:hidden; }
body.dark { background:linear-gradient(135deg,#111,#333); color:#fff; }

.phone { width:340px; height:620px; background:linear-gradient(145deg,#fff,#e0e0e0); border-radius:40px; box-shadow:0 15px 40px rgba(0,0,0,0.5); padding:15px; display:flex; flex-direction:column; justify-content:flex-start; position:relative; overflow:hidden; }
.notch { width:120px; height:20px; background:#111; border-radius:0 0 15px 15px; margin:0 auto 10px; }
.screen { background:linear-gradient(to bottom,#fff,#f0f0f0); flex:1; border-radius:25px; padding:20px; display:flex; flex-direction:column; text-align:center; position:relative; transition:0.3s; box-shadow: inset 0 0 20px rgba(255,255,255,0.3);}
body.dark .screen { background:#1f1f1f; color:#fff; box-shadow: inset 0 0 20px rgba(255,255,255,0.1);}
h1 { font-size:22px; margin:10px 0; text-shadow:1px 1px 2px #999; }

#joke { font-size:16px; padding:15px; background:linear-gradient(145deg,#fff,#f9f9f9); border-radius:15px; min-height:160px; display:flex; align-items:flex-start; justify-content:flex-start; overflow-y:auto; max-height:200px; margin-bottom:10px; text-align:left; line-height:1.4; scroll-behavior:smooth; box-shadow:2px 2px 10px rgba(0,0,0,0.2); position:relative; overflow:hidden; }
body.dark #joke { background:#333; color:#fff; }

.glitter { position:absolute; width:4px; height:4px; background:rgba(255,255,255,0.9); border-radius:50%; pointer-events:none; animation:glitterMove 2s linear infinite;}
@keyframes glitterMove {0% {opacity:0; transform:translate(0,0) scale(1);}50% {opacity:1; transform:translate(calc(50px*var(--randX)),-20px) scale(1.2);}100% {opacity:0; transform:translate(calc(100px*var(--randX)),-50px) scale(0.5);}}

button { padding:14px; border:none; border-radius:15px; background:linear-gradient(145deg,#ff758c,#ff7eb3); color:white; font-size:16px; cursor:pointer; margin-bottom:5px; box-shadow:2px 2px 6px rgba(0,0,0,0.2); transition:0.3s; position:relative; overflow:hidden;}
button:hover { transform:scale(1.03);}
button:active { transform:scale(0.96);}
.controls { display:flex; justify-content:space-between; margin-top:10px; flex-wrap:wrap; gap:5px;}
.small-btn { font-size:12px; padding:8px; background:#444; flex:1; border-radius:12px; color:white;}

.footer { font-size:12px; color:#888; margin-top:10px;}
.credit { font-size:8px; color:#aaa; position:absolute; bottom:5px; left:0; width:100%; text-align:center;}

.heart { position:absolute; color:#ff4e50; font-size:24px; pointer-events:none; opacity:0; transform:translateY(0) scale(1); animation:float linear forwards;}
@keyframes float {0% {opacity:1; transform:translateY(0) scale(1) rotate(0deg);}100% {opacity:0; transform:translateY(-300px) scale(1.5) rotate(360deg);}}

#joke::-webkit-scrollbar { width:6px;}
#joke::-webkit-scrollbar-track { background:#f0f0f0; border-radius:3px;}
#joke::-webkit-scrollbar-thumb { background:#667eea; border-radius:3px;}
#joke::-webkit-scrollbar-thumb:hover { background:#764ba2;}

.hidden { display:none; }
input, textarea { border-radius:8px; border:1px solid #ccc; padding:8px; width:90%; margin-bottom:5px;}
#shareOptions { margin-top:5px; font-size:14px; display:none; text-align:left; }
#shareOptions a { display:block; margin:3px 0; color:#fff; background:#667eea; padding:5px; border-radius:5px; text-decoration:none; }
</style>
</head>
<body>
<div class="phone">
  <div class="notch"></div>
  <div class="screen">

    <h1>Jokeroo</h1>

    <!-- Registration -->
    <div id="registerDiv">
      <h3>Register / Login</h3>
      <input type="email" id="email" placeholder="Enter Email"><br>
      <input type="password" id="password" placeholder="Enter Password"><br>
      <button onclick="registerUser()">Register / Login</button>
    </div>

    <!-- Main App -->
    <div id="appDiv" class="hidden">
      <div id="joke">Loading daily joke...</div>

      <button onclick="getJoke()">Get Joke</button>
      <button onclick="toggleShare()">üîó Share App</button>
      <div id="shareOptions">
        <a href="https://wa.me/?text=Check%20out%20Jokeroo%20App!" target="_blank">WhatsApp</a>
        <a href="https://www.facebook.com/sharer/sharer.php?u=https://yourapp.com" target="_blank">Facebook</a>
        <a href="https://twitter.com/intent/tweet?text=Check%20out%20Jokeroo%20App!" target="_blank">Twitter</a>
        <a href="mailto:?subject=Jokeroo App&body=Check out Jokeroo App!" target="_blank">Email</a>
      </div>

      <button onclick="toggleDark()">üåô Dark</button>
      
      <div class="controls">
        <button class="small-btn" onclick="setCategory('funny')">üòÇ Daily Jokes</button>
        <button class="small-btn" onclick="setCategory('love')">‚ù§Ô∏è Love</button>
        <button class="small-btn" onclick="setCategory('romantic')">üíñ Romantic</button>
        <button class="small-btn" onclick="showAdvertForm()">üì¢ Advertise</button>
      </div>

      <div id="advertsDiv"></div>

      <div class="footer">Swipe up for a new joke</div>
      <div class="credit">Property of WinTech Technology</div>
    </div>

    <!-- Advert Form -->
    <div id="advertDiv" class="hidden" style="margin-top:10px;">
      <h4>Advertise Your Company</h4>
      <textarea id="advertText" placeholder="Paste your advert here..."></textarea><br>

      <label>Payment Options:</label><br>
      <button onclick="payWithPayFast()">üí≥ Pay with PayFast ($5/day)</button><br><br>

      <label>Or attach Proof of Payment:</label>
      <input type="file" id="proofFile"><br><br>

      <button onclick="submitAdvert()">Submit Advert</button>
      <button onclick="closeAdvertForm()">Close</button>
    </div>

  </div>
</div>

<audio id="sound1" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>
<audio id="sound2" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
<audio id="sound3" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>

<script>
// Users
let currentUser = null;
let users = JSON.parse(localStorage.getItem("users")||"{}");

function registerUser(){
  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value;
  if(!email||!password){ alert("Enter email and password"); return; }
  users[email]={password,email};
  localStorage.setItem("users",JSON.stringify(users));
  currentUser=email;
  alert("Registration/Login done. Admin notified at muvhangos@gmail.com üìß");
  document.getElementById("registerDiv").classList.add("hidden");
  document.getElementById("appDiv").classList.remove("hidden");
}

// Jokes
const jokeDiv=document.getElementById("joke");
let currentCategory="funny";
const sounds=[document.getElementById("sound1"),document.getElementById("sound2"),document.getElementById("sound3")];

const jokes = {
  funny:[
    "Why don‚Äôt programmers like nature? Too many bugs.",
    "Why did the computer get cold? It forgot to close Windows.",
    "Why was the JavaScript developer sad? Because he didn‚Äôt know how to 'null' his feelings.",
    "Why did the database admin leave his wife? She had one-to-many relationships.",
    "Why do programmers prefer dark mode? Because light attracts bugs."
  ],
  love:[
    "Love is when your happiness depends on someone else‚Äôs smile ‚ù§Ô∏è",
    "Love is sharing fries even when you said you weren‚Äôt hungry üçü",
    "Love is arguing over food and still ordering extra üòÑ",
    "Love makes ordinary moments feel magical ‚ú®",
    "Love is finding comfort in someone‚Äôs silence üíï",
    "Love is choosing the same person every day üíñ",
    "Love is laughing at jokes that aren‚Äôt funny üòç",
    "Love is staying even when it‚Äôs hard üíó",
    "Love is a warm hug on a cold day ü§ó",
    "Love is caring without conditions ‚ù§Ô∏è"
  ],
  romantic:[
    "You are my favorite thought before sleep üåô",
    "Every love song makes sense because of you üé∂",
    "You make my heart smile üíò",
    "With you, love feels easy ‚ù§Ô∏è",
    "Your presence feels like home üè°",
    "I‚Äôd choose you in every lifetime üí´",
    "You are my calm in chaos üåπ",
    "Your smile is my favorite view üòç",
    "I fell for you without realizing it üíï",
    "You are my forever kind of moment ‚ôæÔ∏è"
  ]
};

// Daily joke auto-update
let lastDay = new Date().getDate();
function loadDailyJoke() {
    const today = new Date();
    const dayNumber = today.getDate();
    const jokeIndex = dayNumber % jokes.funny.length;
    jokeDiv.innerText = jokes.funny[jokeIndex];
    lastDay = dayNumber;
}
setInterval(() => {
    const today = new Date();
    if(today.getDate() !== lastDay && currentCategory === "funny") {
        loadDailyJoke();
    }
}, 60000);
loadDailyJoke();

// Functions
function setCategory(cat){ currentCategory=cat; getJoke(); }
function getJoke(){
  const arr=jokes[currentCategory];
  if(!arr||arr.length===0){ jokeDiv.innerText="No jokes üòÖ"; return; }
  const idx=Math.floor(Math.random()*arr.length);
  jokeDiv.innerText=arr[idx]; jokeDiv.scrollTop=0; playSound();
  if(currentCategory!=="funny"){ createHearts(); createGlitter(); }
}
function playSound(){ const s=sounds[Math.floor(Math.random()*sounds.length)]; s.currentTime=0; s.play(); }
function toggleDark(){ document.body.classList.toggle("dark"); }
function createHearts(){ for(let i=0;i<5;i++){ const heart=document.createElement("div"); heart.className="heart"; heart.style.left=Math.random()*90+"%"; heart.style.animationDuration=(Math.random()*2+2)+"s"; heart.innerText="‚ù§Ô∏è"; document.body.appendChild(heart); setTimeout(()=>heart.remove(),2500); }}
function createGlitter(){ for(let i=0;i<10;i++){ const g=document.createElement("div"); g.className="glitter"; g.style.left=Math.random()*100+"%"; g.style.top=Math.random()*100+"%"; g.style.setProperty("--randX",Math.random()); document.body.appendChild(g); setTimeout(()=>g.remove(),2000); }}
function toggleShare(){ const s=document.getElementById("shareOptions"); s.style.display = s.style.display==="none"?"block":"none"; }

// Swipe
let startY;
jokeDiv.addEventListener("touchstart",e=>{ startY=e.touches[0].clientY; });
jokeDiv.addEventListener("touchend",e=>{ if(startY-e.changedTouches[0].clientY>50) getJoke(); });

// Advert
let adverts=JSON.parse(localStorage.getItem("adverts")||"[]");
function showAdvertForm(){ document.getElementById("advertDiv").classList.remove("hidden"); }
function closeAdvertForm(){ document.getElementById("advertDiv").classList.add("hidden"); }

function submitAdvert(){
  const text=document.getElementById("advertText").value.trim();
  if(!text){ alert("Enter advert text"); return; }
  const file=document.getElementById("proofFile").files[0];
  if(!file){ alert("Attach proof of payment"); return; }
  const advert={user:currentUser,text,days:1,approved:true};
  adverts.push(advert); localStorage.setItem("adverts",JSON.stringify(adverts));
  alert("Advert submitted & approved! Admin notified at muvhangos@gmail.com");
  displayAdverts(); closeAdvertForm();
}

function displayAdverts(){
  const div=document.getElementById("advertsDiv"); div.innerHTML="";
  adverts.forEach(a=>{ if(a.approved) div.innerHTML+='<div style="background:#ffe;color:#000;padding:5px;border-radius:8px;margin:5px 0;">'+a.text+'</div>'; });
}
displayAdverts();

// PayFast Integration
function payWithPayFast(){
    if(!currentUser){ alert("Please register/login first"); return; }

    const text = document.getElementById("advertText").value.trim();
    if(!text){ alert("Enter advert text before paying"); return; }

    const advertId = Date.now() + "_" + Math.floor(Math.random()*1000);
    adverts.push({user:currentUser, text, days:1, approved:false, id:advertId});
    localStorage.setItem("adverts",JSON.stringify(adverts));
    displayAdverts();

    const merchantId = "10000100"; // Replace with your PayFast Merchant ID
    const merchantKey = "xxxx"; // Replace with your Merchant Key
    const returnUrl = "https://yourapp.com/advert-success"; 
    const cancelUrl = "https://yourapp.com/advert-cancel"; 
    const notifyUrl = "https://yourserver.com/payfast-ipn"; // Server endpoint

    const amount = 5.00;
    const itemName = "Jokeroo Advert - 1 day";
    const customStr = advertId;

    const payUrl = `https://sandbox.payfast.co.za/eng/process?merchant_id=${merchantId}&merchant_key=${merchantKey}&return_url=${encodeURIComponent(returnUrl)}&cancel_url=${encodeURIComponent(cancelUrl)}&notify_url=${encodeURIComponent(notifyUrl)}&amount=${amount}&item_name=${encodeURIComponent(itemName)}&custom_str=${customStr}`;

    window.open(payUrl, "_blank");
    alert("Payment page opened. Your advert will auto-approve once payment is confirmed.");
}
</script>
</body>
</html>
